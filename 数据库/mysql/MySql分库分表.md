### 数据库分库分表

> 目的：将负载高的数据分开

数据库分片

1. 如何选择**分区键**

   - 尽量避免跨片查询

     如：博客系统可以按用户分片

   - 尽量使数据平均

2. 如何选择无需分片的表
   - 每片都保存一份数据（问题：一致性）
   -  使用独立的节点保存这份数据（问题：查询较慢）

3. 如何在节点上部署分片
   - 将多个分片表存储在同一数据库中，以前缀id区分它们
   - 每个分片使用一个数据库
   - 每个分片使用一个节点中的数据库，并且数据库名字也相同

4. 如何分配片中的数据

   - 按分区键的hash取模

   - 按分区键的范围

   - 建立分区键和分片的映射表（全局）

     那么这张表会承受高访问量，最好使用缓存